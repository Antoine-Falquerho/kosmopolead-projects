<%= error_messages_for 'file_attachment' %>

<%= form_upload({:url=>"projects/#{@project.identifier}/file_attachments/create",:col_collection=>@file_attachment,:name_initial_form=>"upload_form_file_#{@file_attachment.id}",:name_div_id=>"upload_file_#{@file_attachment.id}"}) %>
<div class="editable_box">
    <div class="links_edit_box">
        <%= link_to_remote "#{image_tag('/images/add.png')}",
                         { :url => { :controller => 'file_attachments', :action => 'new',:project_id=>@project},
                           :method => 'post',
                           :update => 'add_file'
                         } %>
     </div>
    <div id="files_index">
      <% if @project.file_attachments.size>0 %>
        <%= render:partial=>"file_attachments/index",:locals=>{:file_attachments=>@project.file_attachments} %>
      <% else %>
          <div class="emptymessage">
          <p><%= l(:project_add_file) %>
          <%= link_to_remote "#{image_tag('/images/add.png')}",
                         { :url => { :controller => 'file_attachments', :action => 'new',:project_id=>@project},
                           :method => 'post',
                           :update => 'add_file'
                         } %>
        </div>
      <% end %>
    </div>
</div>

<div id="add_file">

</div>
<%= javascript_include_tag("ajaxfileupload") %>